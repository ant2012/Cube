<html>
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>The Cube</title>
  <link rel="stylesheet" href="css/bootstrap.some.css">
  <link rel="stylesheet" href="css/dynamic.css" />
  <!--[if lt IE 9]><!--<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>--><![endif]-->
</head>
<body>
<div class="pageHeader">
  <div>The Cube Analytics</div>
  <div class="measure"></div>
</div>

<div class="wrapper">
  <section class="viewport">
    <div class="faceHeader faceHeaderUndefined">Face Header</div>
    <div class="axis topAxis axisUndefined">Top Axis</div>
    <div class="axis leftAxis axisUndefined">Left Axis</div>
    <!--<div class="infoBox">-->
      <!--<label>Nearest Face=front</label><br/>-->
      <!--<label>dX = 0.00deg; dY = 0.00deg; dZ = 0.00deg;</label>-->
    <!--</div>-->
    <div class="grid">
      <div class="slices">Loading Cube..</div>
    </div>
  </section>
</div>
<div class="joystick">
  <table class="joystickHidden">
    <tr>
      <td></td>
      <td></td>
      <td>
        <button class="btn btn-default" id="showBack">Show Back</button>
      </td>
    </tr>
    <tr>
      <td></td>
      <td>
        <button class="btn btn-default" id="showTop">Show Top</button>
      </td>
      <td></td>
    </tr>
    <tr>
      <td>
        <button class="btn btn-default" id="showLeft">Show Left</button>
      </td>
      <td>
        <button class="btn btn-default" id="showFront">Show Front</button>
      </td>
      <td>
        <button class="btn btn-default" id="showRight">Show Right</button>
      </td>
    </tr>
    <tr>
      <td></td>
      <td>
        <button class="btn btn-default" id="showBottom">Show Bottom</button>
      </td>
      <td></td>
    </tr>
    <tr>
      <td colspan="3" align="right">
        <label for="autoRotate">AutoRotate to nearest face</label><input id="autoRotate" type="checkbox" checked><br/>
        <label for="showDimensions">Show dimensions</label><input id="showDimensions" type="checkbox" unchecked>
      </td>
    </tr>
  </table>
  <div class="joystickHandler" title="Show\Hide Joystick">&nbsp;&#9650; Joystick&nbsp;</div>
</div>
<div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r71/three.min.js"></script>
<script src="js/data.js"></script>
<script src="js/dynamic.js"></script>
<script lang="javascript">
  window.afterCubeInit = function(cube){

    $('.measure')[0].innerText = "Cube measure: " + cube.dataSet.data.grid.index1;

    //Buttons
    $('#showRight').on('click', function(){
      cube.showFace("right");
    });

    $('#showLeft').on('click', function(){
      cube.showFace("left");
    });

    $('#showFront').on('click', function(){
      cube.showFace("front");
    });

    $('#showBack').on('click', function(){
      cube.showFace("back");
    });

    $('#showTop').on('click', function(){
      cube.showFace("top");
    });

    $('#showBottom').on('click', function(){
      cube.showFace("bottom");
    });

    //Auto Rotate
    $('#autoRotate')[0].checked = cube.autoRotateToNearestFace;
    $('#autoRotate').on('click', function(evt){
      cube.autoRotateToNearestFace = evt.target.checked;
      cube.showNearestFace();
    });

    //Dimensions
    $('#showDimensions')[0].checked = cube.showDimensions;
    $('#showDimensions').on('click', function(evt){
      cube.showDimensions = evt.target.checked;
      cube.fillFaces();
    });
  }
  //Init Cube on document load
  $(function(){
    getJsonData("/json?static");
//    getJsonData("/json?catalog=crsv&schema=crsv&cube=crsv&dynamic=1&measure=Vg+tg&dim1=V+region&dim2=V+trader&dim3=V+time");
    $('.joystickHandler').on('click', function(evt){
      if($('.joystick>table').hasClass('joystickHidden')){
        $('.joystickHandler')[0].innerHTML = "&nbsp;&#9660; Joystick&nbsp;";
      }else{
        $('.joystickHandler')[0].innerHTML = "&nbsp;&#9650; Joystick&nbsp;";
      }
      $('.joystick>table').toggleClass('joystickHidden');
    });
  });

</script>

</body>
</html>
